<Project Sdk="Microsoft.NET.Sdk">
	<PropertyGroup>
		<OutputType>Exe</OutputType>
		<!--If you are willing to use Windows/MacOS native APIs you will need to create 3 projects.
    One for Windows with net8.0-windows TFM, one for MacOS with net8.0-macos and one with net8.0 TFM for Linux.-->
		<TargetFramework>net8.0</TargetFramework>
		<Nullable>enable</Nullable>
		<BuiltInComInteropSupport>true</BuiltInComInteropSupport>
		<IncludeSourceRevisionInInformationalVersion>false</IncludeSourceRevisionInInformationalVersion>
	</PropertyGroup>

	<PropertyGroup>
		<AssemblyTitle>WorldBuilder</AssemblyTitle>
		<!-- When using AssemblyDiagnosticsAccessor, accessor.AssemblyTitle is actually the
     <Product> information due to limitations with the way the diagnostics access works -->
		<Description>WorldBuilder</Description>
		<Company>Thrungus</Company>
		<Product>WorldBuilder</Product>
		<Copyright>2025 Thrungus</Copyright>
		<ApplicationManifest>app.manifest</ApplicationManifest>
		<ApplicationIcon>avalonia-logo.ico</ApplicationIcon>
		<UpdateAssemblyInfo>false</UpdateAssemblyInfo>
	</PropertyGroup>

	<Target Name="VSGitVersion" BeforeTargets="PreBuildEvent;BeforeCompile" Condition="$(MSBuildRuntimeType)=='Full'">
		<Exec Command="$(NuGetPackageRoot)\gitversion.msbuild\6.4.0\tools\net8.0\gitversion.exe -showvariable Major" ConsoleToMSBuild="true">
			<Output TaskParameter="ConsoleOutput" PropertyName="GitVersion_Major" />
		</Exec>
		<Exec Command="$(NuGetPackageRoot)\gitversion.msbuild\6.4.0\tools\net8.0\gitversion.exe -showvariable MajorMinorPatch" ConsoleToMSBuild="true">
			<Output TaskParameter="ConsoleOutput" PropertyName="GitVersion_MajorMinorPatch" />
		</Exec>
		<Exec Command="$(NuGetPackageRoot)\gitversion.msbuild\6.4.0\tools\net8.0\gitversion.exe -showvariable PreReleaseTag" ConsoleToMSBuild="true">
			<Output TaskParameter="ConsoleOutput" PropertyName="GitVersion_PreReleaseTag" />
		</Exec>
		<Exec Command="$(NuGetPackageRoot)\gitversion.msbuild\6.4.0\tools\net8.0\gitversion.exe -showvariable CommitsSinceVersionSource" ConsoleToMSBuild="true">
			<Output TaskParameter="ConsoleOutput" PropertyName="GitVersion_CommitsSinceVersionSource" />
		</Exec>

		<PropertyGroup>
			<AssemblyVersion>$(GitVersion_Major).0.0</AssemblyVersion>
			<Version Condition="'$(GitVersion_PreReleaseTag)' != ''">$(GitVersion_MajorMinorPatch)+$(GitVersion_CommitsSinceVersionSource)</Version>
			<Version Condition="'$(GitVersion_PreReleaseTag)' == ''">$(GitVersion_MajorMinorPatch)</Version>
			<FileVersion Condition="'$(GitVersion_PreReleaseTag)' != ''">$(GitVersion_MajorMinorPatch)+$(GitVersion_CommitsSinceVersionSource)</FileVersion>
			<FileVersion Condition="'$(GitVersion_PreReleaseTag)' == ''">$(GitVersion_MajorMinorPatch)</FileVersion>
			<ProductVersion Condition="'$(GitVersion_PreReleaseTag)' != ''">$(GitVersion_MajorMinorPatch)+$(GitVersion_CommitsSinceVersionSource)</ProductVersion>
			<ProductVersion Condition="'$(GitVersion_PreReleaseTag)' == ''">$(GitVersion_MajorMinorPatch)</ProductVersion>
		</PropertyGroup>
	</Target>

	<ItemGroup>
		<Content Include="avalonia-logo.ico" />
	</ItemGroup>

	<ItemGroup>
		<PackageReference Include="Avalonia.Desktop" Version="11.3.7" />
		<!--Condition below is needed to remove Avalonia.Diagnostics package from build output in Release configuration.-->
		<PackageReference Include="Avalonia.Diagnostics" Version="11.3.7">
			<IncludeAssets Condition="'$(Configuration)' != 'Debug'">None</IncludeAssets>
			<PrivateAssets Condition="'$(Configuration)' != 'Debug'">All</PrivateAssets>
			<PrivateAssets>all</PrivateAssets>
			<IncludeAssets>none</IncludeAssets>
		</PackageReference>
		<PackageReference Include="HotAvalonia" Version="3.0.0" PrivateAssets="All" Publish="True" />
		<PackageReference Include="GitVersion.MsBuild" Version="6.4.0">
			<PrivateAssets>all</PrivateAssets>
			<IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>
		</PackageReference>
	</ItemGroup>

	<ItemGroup>
		<ProjectReference Include="..\WorldBuilder\WorldBuilder.csproj" />
	</ItemGroup>
</Project>

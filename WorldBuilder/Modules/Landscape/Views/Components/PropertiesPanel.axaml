<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:WorldBuilder.Modules.Landscape.ViewModels"
             xmlns:views="clr-namespace:WorldBuilder.Views;assembly=WorldBuilder"
             xmlns:comp="clr-namespace:WorldBuilder.Views.Components;assembly=WorldBuilder"
             x:Class="WorldBuilder.Modules.Landscape.Views.Components.PropertiesPanel"
             x:DataType="vm:PropertiesPanelViewModel"
             x:Name="Root">
    <Border Background="{DynamicResource SemiColorBackground0}"
            BorderBrush="{DynamicResource SemiColorBorder}"
            BorderThickness="1"
            CornerRadius="4" Padding="12">
        <StackPanel Spacing="8">
            <TextBlock Text="Properties" FontWeight="SemiBold" />
            <Separator />
            <ContentControl Content="{Binding SelectedItem}">
                <ContentControl.DataTemplates>
                    <DataTemplate DataType="vm:LayerItemViewModel">
                        <StackPanel Spacing="4">
                            <TextBlock Text="{Binding Name, StringFormat='Layer: {0}'}" FontWeight="Bold" />
                            <TextBlock Text="{Binding Model.Id, StringFormat='ID: {0}'}" FontSize="10" Opacity="0.7" />
                        </StackPanel>
                    </DataTemplate>

                    <DataTemplate DataType="vm:LandscapeVertexViewModel">
                        <StackPanel Spacing="4">
                            <TextBlock Text="Landscape Vertex" FontWeight="Bold" />
                            <Grid ColumnDefinitions="Auto, *" RowDefinitions="Auto, Auto, Auto, Auto, Auto, Auto, Auto">
                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Coordinates: " Opacity="0.7" />
                                <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal" Spacing="4">
                                    <TextBlock Text="{Binding VertexX}" />
                                    <TextBlock Text="," />
                                    <TextBlock Text="{Binding VertexY}" />
                                </StackPanel>

                                <TextBlock Grid.Row="1" Grid.Column="0" Text="Height: " Opacity="0.7" />
                                <StackPanel Grid.Row="1" Grid.Column="1" Orientation="Horizontal" Spacing="8">
                                    <TextBlock Text="{Binding Height, StringFormat='\{0:F3\}'}" />
                                    <TextBlock Text="{Binding RawHeight, StringFormat='(raw: \{0\})'}" Opacity="0.5" />
                                </StackPanel>

                                <TextBlock Grid.Row="2" Grid.Column="0" Text="Texture: " Opacity="0.7" />
                                <TextBlock Grid.Row="2" Grid.Column="1" Text="{Binding TextureName}" />

                                <TextBlock Grid.Row="3" Grid.Column="0" Text="Scenery: " Opacity="0.7" />
                                <TextBlock Grid.Row="3" Grid.Column="1" Text="{Binding SceneryName}" />

                                <TextBlock Grid.Row="4" Grid.Column="0" Text="Road Type: " Opacity="0.7" />
                                <TextBlock Grid.Row="4" Grid.Column="1" Text="{Binding RoadType, FallbackValue='None'}" />
                            </Grid>
                        </StackPanel>
                    </DataTemplate>

                    <DataTemplate DataType="vm:StaticObjectViewModel">
                        <StackPanel Spacing="4">
                            <TextBlock Text="Static Object" FontWeight="Bold" />
                            <Grid ColumnDefinitions="Auto, *" RowDefinitions="Auto, Auto, Auto, Auto">
                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Model ID: " Opacity="0.7" VerticalAlignment="Center" />
                                <comp:DataIdControl Grid.Row="0" Grid.Column="1" 
                                                   DataId="{Binding ObjectId}" 
                                                   Dats="{Binding #Root.((vm:PropertiesPanelViewModel)DataContext).Dats}" />
                                
                                <TextBlock Grid.Row="1" Grid.Column="0" Text="Instance ID: " Opacity="0.7" VerticalAlignment="Center" />
                                <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding InstanceIdHex}" VerticalAlignment="Center" />
                                
                                <TextBlock Grid.Row="2" Grid.Column="0" Text="Landblock: " Opacity="0.7" VerticalAlignment="Center" />
                                <TextBlock Grid.Row="2" Grid.Column="1" Text="{Binding LandblockIdHex}" VerticalAlignment="Center" />

                                <TextBlock Grid.Row="3" Grid.Column="0" Text="Position: " Opacity="0.7" />
                                <StackPanel Grid.Row="3" Grid.Column="1" Orientation="Horizontal" Spacing="4">
                                    <TextBlock Text="{Binding X, StringFormat='\{0:F2\}'}" />
                                    <TextBlock Text="{Binding Y, StringFormat='\{0:F2\}'}" />
                                    <TextBlock Text="{Binding Z, StringFormat='\{0:F2\}'}" />
                                </StackPanel>
                            </Grid>
                        </StackPanel>
                    </DataTemplate>

                    <DataTemplate DataType="vm:BuildingViewModel">
                        <StackPanel Spacing="4">
                            <TextBlock Text="Building" FontWeight="Bold" />
                            <Grid ColumnDefinitions="Auto, *" RowDefinitions="Auto, Auto, Auto, Auto">
                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Model ID: " Opacity="0.7" VerticalAlignment="Center" />
                                <comp:DataIdControl Grid.Row="0" Grid.Column="1" 
                                                   DataId="{Binding ModelId}" 
                                                   Dats="{Binding #Root.((vm:PropertiesPanelViewModel)DataContext).Dats}" />
                                
                                <TextBlock Grid.Row="1" Grid.Column="0" Text="Instance ID: " Opacity="0.7" VerticalAlignment="Center" />
                                <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding InstanceIdHex}" VerticalAlignment="Center" />
                                
                                <TextBlock Grid.Row="2" Grid.Column="0" Text="Landblock: " Opacity="0.7" VerticalAlignment="Center" />
                                <TextBlock Grid.Row="2" Grid.Column="1" Text="{Binding LandblockIdHex}" VerticalAlignment="Center" />

                                <TextBlock Grid.Row="3" Grid.Column="0" Text="Position: " Opacity="0.7" />
                                <StackPanel Grid.Row="3" Grid.Column="1" Orientation="Horizontal" Spacing="4">
                                    <TextBlock Text="{Binding X, StringFormat='\{0:F2\}'}" />
                                    <TextBlock Text="{Binding Y, StringFormat='\{0:F2\}'}" />
                                    <TextBlock Text="{Binding Z, StringFormat='\{0:F2\}'}" />
                                </StackPanel>
                            </Grid>
                        </StackPanel>
                    </DataTemplate>

                    <DataTemplate DataType="vm:SceneryViewModel">
                        <StackPanel Spacing="4">
                            <TextBlock Text="Scenery" FontWeight="Bold" />
                            <Grid ColumnDefinitions="Auto, *" RowDefinitions="Auto, Auto, Auto, Auto">
                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Model ID: " Opacity="0.7" VerticalAlignment="Center" />
                                <comp:DataIdControl Grid.Row="0" Grid.Column="1" 
                                                   DataId="{Binding ObjectId}" 
                                                   Dats="{Binding #Root.((vm:PropertiesPanelViewModel)DataContext).Dats}" />
                                
                                <TextBlock Grid.Row="1" Grid.Column="0" Text="Instance ID: " Opacity="0.7" VerticalAlignment="Center" />
                                <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding InstanceIdHex}" VerticalAlignment="Center" />
                                
                                <TextBlock Grid.Row="2" Grid.Column="0" Text="Landblock: " Opacity="0.7" VerticalAlignment="Center" />
                                <TextBlock Grid.Row="2" Grid.Column="1" Text="{Binding LandblockIdHex}" VerticalAlignment="Center" />

                                <TextBlock Grid.Row="3" Grid.Column="0" Text="Position: " Opacity="0.7" />
                                <StackPanel Grid.Row="3" Grid.Column="1" Orientation="Horizontal" Spacing="4">
                                    <TextBlock Text="{Binding X, StringFormat='\{0:F2\}'}" />
                                    <TextBlock Text="{Binding Y, StringFormat='\{0:F2\}'}" />
                                    <TextBlock Text="{Binding Z, StringFormat='\{0:F2\}'}" />
                                </StackPanel>
                            </Grid>
                        </StackPanel>
                    </DataTemplate>

                    <DataTemplate DataType="vm:PortalViewModel">
                        <StackPanel Spacing="4">
                            <TextBlock Text="Portal" FontWeight="Bold" />
                            <Grid ColumnDefinitions="Auto, *" RowDefinitions="Auto, Auto, Auto, Auto, Auto, Auto, Auto">
                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Cell ID: " Opacity="0.7" VerticalAlignment="Center" />
                                <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding CellIdHex}" VerticalAlignment="Center" />
                                
                                <TextBlock Grid.Row="1" Grid.Column="0" Text="Portal Index: " Opacity="0.7" VerticalAlignment="Center" />
                                <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding InstanceIdHex}" VerticalAlignment="Center" />
                                
                                <TextBlock Grid.Row="2" Grid.Column="0" Text="Landblock: " Opacity="0.7" VerticalAlignment="Center" />
                                <TextBlock Grid.Row="2" Grid.Column="1" Text="{Binding LandblockIdHex}" VerticalAlignment="Center" />

                                <TextBlock Grid.Row="3" Grid.Column="0" Text="Flags: " Opacity="0.7" VerticalAlignment="Center" />
                                <TextBlock Grid.Row="3" Grid.Column="1" Text="{Binding Flags}" VerticalAlignment="Center" />

                                <TextBlock Grid.Row="4" Grid.Column="0" Text="Polygon ID: " Opacity="0.7" VerticalAlignment="Center" />
                                <TextBlock Grid.Row="4" Grid.Column="1" Text="{Binding PolygonId}" VerticalAlignment="Center" />

                                <TextBlock Grid.Row="5" Grid.Column="0" Text="Other Cell: " Opacity="0.7" VerticalAlignment="Center" />
                                <TextBlock Grid.Row="5" Grid.Column="1" Text="{Binding OtherCellIdHex}" VerticalAlignment="Center" />

                                <TextBlock Grid.Row="6" Grid.Column="0" Text="Other Portal: " Opacity="0.7" VerticalAlignment="Center" />
                                <TextBlock Grid.Row="6" Grid.Column="1" Text="{Binding OtherPortalId}" VerticalAlignment="Center" />
                            </Grid>
                        </StackPanel>
                    </DataTemplate>

                    <DataTemplate DataType="vm:EnvCellViewModel">
                        <StackPanel Spacing="4">
                            <TextBlock Text="Interior Cell" FontWeight="Bold" />
                            <Grid ColumnDefinitions="Auto, *" RowDefinitions="Auto, Auto, Auto, Auto">
                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Cell ID: " Opacity="0.7" VerticalAlignment="Center" />
                                <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding ObjectIdHex}" VerticalAlignment="Center" />
                                
                                <TextBlock Grid.Row="1" Grid.Column="0" Text="Instance ID: " Opacity="0.7" VerticalAlignment="Center" />
                                <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding InstanceIdHex}" VerticalAlignment="Center" />
                                
                                <TextBlock Grid.Row="2" Grid.Column="0" Text="Landblock: " Opacity="0.7" VerticalAlignment="Center" />
                                <TextBlock Grid.Row="2" Grid.Column="1" Text="{Binding LandblockIdHex}" VerticalAlignment="Center" />

                                <TextBlock Grid.Row="3" Grid.Column="0" Text="Position: " Opacity="0.7" />
                                <StackPanel Grid.Row="3" Grid.Column="1" Orientation="Horizontal" Spacing="4">
                                    <TextBlock Text="{Binding X, StringFormat='\{0:F2\}'}" />
                                    <TextBlock Text="{Binding Y, StringFormat='\{0:F2\}'}" />
                                    <TextBlock Text="{Binding Z, StringFormat='\{0:F2\}'}" />
                                </StackPanel>
                            </Grid>
                        </StackPanel>
                    </DataTemplate>

                    <DataTemplate DataType="vm:EnvCellStaticObjectViewModel">
                        <StackPanel Spacing="4">
                            <TextBlock Text="Cell Object" FontWeight="Bold" />
                            <Grid ColumnDefinitions="Auto, *" RowDefinitions="Auto, Auto, Auto, Auto, Auto">
                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Model ID: " Opacity="0.7" VerticalAlignment="Center" />
                                <comp:DataIdControl Grid.Row="0" Grid.Column="1" 
                                                   DataId="{Binding ObjectId}" 
                                                   Dats="{Binding #Root.((vm:PropertiesPanelViewModel)DataContext).Dats}" />
                                
                                <TextBlock Grid.Row="1" Grid.Column="0" Text="Cell Index: " Opacity="0.7" VerticalAlignment="Center" />
                                <StackPanel Grid.Row="1" Grid.Column="1" Orientation="Horizontal" Spacing="8">
                                    <TextBlock Text="{Binding SecondaryId}" VerticalAlignment="Center" />
                                    <TextBlock Text="(Custom)" IsVisible="{Binding IsCustom}" VerticalAlignment="Center" Opacity="0.7" FontSize="11" />
                                </StackPanel>

                                <TextBlock Grid.Row="2" Grid.Column="0" Text="Instance ID: " Opacity="0.7" VerticalAlignment="Center" />
                                <TextBlock Grid.Row="2" Grid.Column="1" Text="{Binding InstanceIdHex}" VerticalAlignment="Center" />
                                
                                <TextBlock Grid.Row="3" Grid.Column="0" Text="Landblock: " Opacity="0.7" VerticalAlignment="Center" />
                                <TextBlock Grid.Row="3" Grid.Column="1" Text="{Binding LandblockIdHex}" VerticalAlignment="Center" />

                                <TextBlock Grid.Row="4" Grid.Column="0" Text="Position: " Opacity="0.7" />
                                <StackPanel Grid.Row="4" Grid.Column="1" Orientation="Horizontal" Spacing="4">
                                    <TextBlock Text="{Binding X, StringFormat='\{0:F2\}'}" />
                                    <TextBlock Text="{Binding Y, StringFormat='\{0:F2\}'}" />
                                    <TextBlock Text="{Binding Z, StringFormat='\{0:F2\}'}" />
                                </StackPanel>
                            </Grid>
                        </StackPanel>
                    </DataTemplate>
                </ContentControl.DataTemplates>
            </ContentControl>
            <TextBlock Text="No selection" 
                       HorizontalAlignment="Center" 
                       Margin="0,20" 
                       Opacity="0.5"
                       IsVisible="{Binding SelectedItem, Converter={x:Static ObjectConverters.IsNull}}" />
        </StackPanel>
    </Border>
</UserControl>

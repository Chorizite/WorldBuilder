<views:Base3DView
    x:Class="WorldBuilder.Editors.Landscape.Views.ObjectDebugView"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:conv="using:WorldBuilder.Lib.Converters"
    xmlns:views="using:WorldBuilder.Views"
    xmlns:vm="using:WorldBuilder.Editors.Landscape.ViewModels"
    x:CompileBindings="True"
    x:DataType="vm:ObjectDebugViewModel">
    <Grid ColumnDefinitions="250, Auto, *">
        <!--  Left Panel: Controls and ID Lists  -->
        <Border
            Grid.Column="0"
            Background="{DynamicResource SystemControlBackgroundAltHighBrush}"
            BorderBrush="{DynamicResource SystemControlForegroundBaseMediumLowBrush}"
            BorderThickness="0,0,1,0">
            <DockPanel LastChildFill="True">
                <!--  Input Bar at Top  -->
                <StackPanel
                    Margin="5"
                    DockPanel.Dock="Top"
                    Orientation="Horizontal"
                    Spacing="5">
                    <TextBox
                        Width="150"
                        Text="{Binding ObjectIdText}"
                        Watermark="Enter ID (hex like 0x02000001)" />
                    <Button Command="{Binding LoadCommand}" Content="Load" />
                    <TextBlock
                        VerticalAlignment="Center"
                        Foreground="Red"
                        Text="{Binding Status}" />
                </StackPanel>

                <!--  Search for IDs  -->
                <TextBox
                    Margin="5"
                    DockPanel.Dock="Top"
                    Text="{Binding SearchText}"
                    Watermark="Search IDs (hex/dec/substring)" />

                <!--  Scrollable ID Lists (Virtualized via ListBox)  -->
                <ScrollViewer Height="300" DockPanel.Dock="Top">
                    <Grid RowDefinitions="Auto, *, Auto, *">
                        <!--  Setup IDs  -->
                        <TextBlock
                            Grid.Row="0"
                            Margin="5,5,5,2"
                            FontWeight="Bold"
                            Text="Setup IDs (0x01xxxxxx)" />
                        <ListBox
                            Grid.Row="1"
                            Margin="5,0,5,5"
                            ItemsSource="{Binding FilteredSetupIds}"
                            SelectedItem="{Binding SelectedSetupId}">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Converter={x:Static conv:IdToStringConverter.Instance}}" />
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>

                        <!--  GfxObj IDs  -->
                        <TextBlock
                            Grid.Row="2"
                            Margin="5,5,5,2"
                            FontWeight="Bold"
                            Text="GfxObj IDs (0x02xxxxxx)" />
                        <ListBox
                            Grid.Row="3"
                            Margin="5,0,5,5"
                            ItemsSource="{Binding FilteredGfxObjIds}"
                            SelectedItem="{Binding SelectedGfxObjId}">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Converter={x:Static conv:IdToStringConverter.Instance}}" />
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </Grid>
                </ScrollViewer>

                <!--  Optional: Other controls or spacer  -->
                <Border DockPanel.Dock="Bottom" />
            </DockPanel>
        </Border>

        <!--  Splitter  -->
        <GridSplitter
            Grid.Column="1"
            Width="5"
            HorizontalAlignment="Center"
            VerticalAlignment="Stretch"
            Background="Transparent" />

        <!--  Right: GL Viewport  -->
        <Panel
            x:Name="Viewport"
            Grid.Column="2"
            Background="Transparent" />
    </Grid>
</views:Base3DView>